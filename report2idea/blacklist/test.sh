#!/bin/bash

# input data:
in='
H4sICBJrGmACA3Rlc3RfaW5wdXQyLnVuaXJlYwCtmN1u4zYQheP2FQr0NlBvFwRn+N/H6E0LLAJV
cWRHW9lyJaVpuvC7dygnsWUPdy3HRhDDlDSkPh2emdGPN8Pnp2K5bMtl0ZcP+X1dzP+qq66/ufn5
dvbb16xr53lXrvv8/qUvu+zXW2M/3WabtumbeVPTb6CfXfPUzst807R9POXzHY31XV4XXR/PMDoo
0PRPeKvjoWW/i7mhycrhEhmjvE21qJvn7jV0X7TL3SmfMwgowHoBygjvsrv3meno/qA0AkFlh/O8
BZS7dS2qll/Y+93n1QMd9zREbPLnap2vqvXTKwAxhHnZDNNWm+xw6fs7gsMFvMGT2x9+YZiCU1K7
MVfLcDX0+XSr6cMSttoRF+QJ030aFrJNUEYphR44Ho6ocDgC1goYDYRATwCPr7LjAUff48s8Rfaj
EXBHka0WDsdzSYo1PgnisElIY5hYWlYayGsD6BIzSP5IG4AfUoezltMHoJLSb2c1IxI0wxq/IxFv
EVhxkHQEOsOLQ3HKwIQwFMRnOsLunECNqR1J+8uw0IFlbgCFkubK+xEdC9xYnjY4xDNoS34jQiAP
cqmNyMF2Ka/zQHhHIndGJFnT9gs8a8OyVlpRMDxlPfjh5ebHuh+AUdvZ7xxtj+H7tHnWEskXFM8a
YVJe8cLIlIidFF5PUHFclwx4ZRUHjitqrXA7qxiwR44xaPIYq1LAy9gAiUMmMjabTGSKrLPCj3IJ
DcQ8kYIdBG/TKqHimD7cKWuFH4EtWdgot7M/LkUtdeBzt6HcHVL2DFNYo9IEMJkCY86cYsbv67qm
jFmySjueLJyT+NB6afjCU3thnZ+AVqVkHEBom0DrDRmIn4BWE1p99bpTcWgN2cMjR9bYcHGW01YJ
K2GCPSQrCivcqK5EMLHSTLgDCosTOCsrKS/qa7sDW8B5GbazPxnSSvlg5AdYExQbEhp2alKaiypO
wo11twx8jczLGJ2w/toyRm3YEkI6rbezh6/jhVhNeL2mSiCcoWdKl/ubz2kJ8f5NBKNjY0J+lyXK
ibj0qsubdf2SL/5+WNNY3z6V+2BPbZw0WzVt8U9VrL/Q6LqoxdOmqcX8vyTVtlyUbdnGS7MDOjEa
03ocCeT15jWV4JZHzpIMO0s8FMhOG97GSuduO3tmvRi1P69TZYUM9JDQ6Sv2qKhPelT4VgMIifTH
lBaa/mzgG8APeYeWIdH+IZJVrznwSir8AHhFwtbop7x++eabAXtMXbsLqDNdt1HWSSVAmytDT/Tc
VM4tTuzEIj10FGFIz5fYCeV20IEKMWIAkPKTUztZFHV36iebx6p7rNZLUf5brDZ1mfISmOoleOIl
mroJVMI53kscynPdxFDnasLgqOBtNJRTzpo6P3Jec/JWEcy5pIeKIHYTjpzrfNCsb983TV+2e8rN
6jqYFcvZq1hOKpYzBJ9oP/B4W2L0bbL/4Ie3W8R5znAOVlGBCniZnqmEQqT4htxVZWkTOUvNbbHq
mtVz0ZbvpJt2mfSHaclxZ3FHqMkULTVGeH565LorpMoTEIShvnV7M5P/A8hpBXJAFwAA
'

# output data:
out='
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
NAAA
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

configfile="`mktemp`"
echo "$blconfig" | base64 -d | gunzip > "$configfile"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "blacklist" "$in" "$out" --blacklist-config "$configfile"
result=$?

rm "$configfile"

exit $result

