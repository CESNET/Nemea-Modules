#!/bin/bash

# input data:
in='
H4sICNKOGWACA3Rlc3RfaW5wdXQyLnVuaXJlYwCtmGtu4zYQx6P2BkUPEKhfFwRnOHz1GP3SAotA
9TqKq9Zru5LcIF3oxL1Eh3IeljPcjWILQQyPxCH505/z8PdX4/XjYrVq69Wir2+rT+vF8q910/VX
Vz/8V/zypezaZdXVm7769NDXXfnztXUfrstdu+23y+2avwN/7bb7dllXu23bp0c+3rCt76r1ouvT
E5aiAeJ/KjhKt1b9weeOJ6vHITp5eZrqbr297x5d94t2dXjkYwkRFbigwFgVfHnzPDPffbmprUIw
5fE8Tw71YV13TSsv7Hn3VXPL9wObmE1132yqz81m/whAjW4eduO0za48XvrLjuB4AU/w9PDdTwJT
8EaTn3J1AlfL14dr4ksk7MgzF5QJ8z6tCNllKKPWikaOxxYTjy3gnIKJIUZ+A3g6yk0Nnj+nwwJ7
DhML+BPPjpTH6VyafU0fgmS2GWmME2snSgNlbQAPsaPkT7QBeJY6vHOSPgCN1mEo1oJI0I5r/IZE
gkMQxcHSUeitLA4jKQMzwjCQ3ukEu/cKCXMnks+XFaGDyNwCKqPthc8jehG4dTJt8IhvoK3lgwiR
Y5DPHUQJts/FugCMdyJyb1WWNR+/KLO2ImtDhp3ha9ZjPHx/8BOjH4A1Q/GrRDtg/DZtmbVGjgtG
Zo0wK68EZXVOxF6rQDNUnNalI15YxVHiikQGh6IRwJ5EjFGTp1iNAVnGFlgcOpOxxWSic2S9U2GS
S9iQ8kQOdlRymDYZFaf04V+zNngObC3CRj0Uv70XtaYo527LuTvmwjPMYY2GGGA2BaacOScYP6/r
kjIWyRryMll4S+JDF7SVC08KyvkwA63JyTiCIpdBGywHkDADLTFaunjdaSS0lsPDHxJZ6+K7sxw5
o5yGGeEhW1E45Sd1JYJNlWYmOqByOIOzcZrzIl06OogFXNBxKH4XSBsTotVnsGYoLmY07M2sNJdU
nIWb6m4d5RpZljF65cKlZYxkxRJCe6KhuP0yXYgjxhuIK4H4Bj1zunzZfMVLSPu3CQylxoTjXZkp
J9LSm67abtYP1d3ftxu29e2+fnG2b9Ok5edtu/inWWz+ZOtmsVb73Xatlv9mqbb1Xd3WbRpaHtFJ
3oTW40Qgj5snLsGdjFwkGQ8h8VggB20Elyqdm6G4F2MxUnhbpyoKGfgloacL9qhIr3pU+FoDCJn0
J5QWxH8uyg3gWbGDdMy0f4gcqjcSeKMNngHesLAJw5yfX776y4A7pU7+HdSFrtsa57VRQPbC0DM9
tx6uCv0/V/wp9gsTAAA=
'

# output data:
out='
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
7nsu/TsQn9xnJvbjGdtsSfwPXwQB0IUrAAA=
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

configfile="`mktemp`"
echo "$blconfig" | base64 -d | gunzip > "$configfile"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "blacklist" "$in" "$out" --blacklist-config "$configfile"
result=$?

rm "$configfile"

exit $result

