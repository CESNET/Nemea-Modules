#!/bin/bash

# input data:
in='
H4sIAG5cWVwAA62WS27bQAyGrXbfVQ8QuNtgQHLePUY3LRAEquM4rlDXNiQFQVDoJj1sOcrLMji1
VFgLG6I0nNE3//Dn+1l/fVys1/VqvWhXt+XNZrH8uamadjb78Kf48nve1MuyWW3b8uaxXTXzzxfW
XV7M9/Wu3S13G75Hvm129/VyVe53dZteubrmWNuUm0XTpjesiRoN/6jgTHq0bp9y7nmyVT8EUpaX
qe42u4fmOXW7qNdPr1zNMZJCFxRqq4KfX7/OzE/fHoJVhHp+OM9LQnha111VZxb2uO9zVfs0/JVF
Wd1yNHCISZUP1bb8VW3vn3EoOJzphdLge94+E7t3nwSm6DUYP+TqBK6Wr8sLw5dI2BnPXEgmzN9p
RcguQ5kAlOk5HkZ0PIygcwoHgRh5B+h4lBsGPP8PhwXOHAYR9EeZnVGehnMB5xq+hClsM9LoJwYn
SoNkbSAPsb3k/6kNpEnqQNIAQZaId64rNoJIyPZrPCGR4AhFcbB0FHkri0NLyqCMMDSmPR1g916R
odyJ5PNlRegoMrdISoM963nEfg8F3ORl2uiJRtAG+SBi5BrkcwdRgu1ztS4g4x2I3FuVZc3HL8qs
rchaG83J6BTrvjqOh41Wy7QRu+KrRDtQPE1bZg3EdUHLrAkn+UpQFnIi9qCCmaDitC6IJ8lOUjEZ
o0kmG7uiEsAeVYxek8dYtUZZxhZZHJBxbNFMIEfWOxUGXsKB5BM52FHJZVpnVJzsw59i3bMbD5sy
Jg5d8e1/UYOJsndb9u6YK8+iinOsSRsGmLXA5JlTivHbus4mY933OuPJ4hjjIxfAyo2nCcr5MAGt
zsk4ojIugzZYLiBhAlrDaM2Z+06bKQ+6K35IZK0bUXczLmecVg5wQnnIdhRO+UFfSWhTp5mpDqQc
TeCsHbAvnuQ8rToEiDJp7t6+C6S1DtGO6d9yrBlKv1eShr3Yv2VtLqk4Czf13RDlHlmWMXnlwnll
zG23MTJfMrabFfAXxL+PlLwOAAA=
'

# output data:
out='
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
IJskLkmEEiZg9V+IrTN/tyYAAA==
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "cz.cesnet.nemea.ipblacklistfilter" "$in" "$out" --blacklist-config <(echo -n "$blconfig" | base64 -d | gunzip)

