#!/bin/bash

# input data:
in='
H4sIAAO1Pl0AA62X3U7bQBCFMX2BXvQBkHuLVjuz/32M3rQSQm5ITOrWxKntFFGUd++sAyQOsyIB
fJHIY+/s7pezZyYfTobr02Q+b8v5pC9nxVU9mf6uq64/Ofl4mn29z7t2WnTloi+u7vqyy7+cGXt+
li/bpm+mTU33QLdds2qnZbFs2j6+cnFJsb4r6knXxzeMDgo0fQhvdXw07zc5lzRZOQyRMcvjVNd1
c9s9pO4n7XzzykUOAQVYL0AZ4V1++TQzPd0+lEYgqHx3nseEcrOu66rlF/a0+6Ka0XNPIWJT3FaL
4qZarB4AiCHN3XKYtlrmu0vf7gh2F/AIT65PPzNMwSmp3ZirZbgaus7PNF0sYasdcUGeMO3TsJBt
gjJKKfTAcTeiwm4ErBUwCoRAvwDuj7LjgKPv8TBPmf0oAm4vs9XC4XguSbnGL0EMm4Q0homlZaWB
vDaAhphB8nvaAHyTOpy1nD4AlZR+ndWMSNAMa3xBIt4isOIg6Qh0hheH4pSBCWEoiL/pCLtzAjWm
TiSdL8NCB5a5ARRKmnc+j+hY4MbytMEhHkBb8gcRAnmQ41mD5mC7lNd5ILwjkTsjkqzp+AWetWFZ
K60oGT5nPfjh682PdT8Ao9bZN462x/AybZ61RPIFxbNGOKqueGFkSsROCq+PUHFclwwM2TepOHBc
UWuF66xiwO45xqDJfaxKAS9jAyQOmajYbDGRKbLOCj+qJRSIdSIFOwjeplVCxbF8uOesFb4FtmRh
o1xn31+LWurA125DtTuk7JlVcYo1Kk0AkyUw1sxjzPhpXe8pY5as0o4nC4cUPrReGr7x1F5Y549A
q1IyDiC0TaD1hgzEH4FWE1r97n2n4tAasoefHFljD/DdRJXTVgkrgefK2kOyo7DCjfpKBBM7zYQ7
oLB4BGdlJdVFhvPb3IFt4LwM6+wHQ1opH8wh/VuKNUGxIaFhx/ZvyTIXVZyEG/tuGfgemZcxOmH9
e8sYteH4Uj+u9Tqb3Y8XYjXh9Zo6gXCAnqlcbjdf0BLi/k0Eo+MfE/K7nAc9+FDVFc2iviuu/8wW
FOvbVblNtmrjpPlN007+VpPFL4ouJrVYLZtaTP8lqbblddmWbRya79CJ2Z5zhT2BPGxeUwtueeQs
ybCxxF2BbLThbex0LtcnmfwPiEoCeCIQAAA=
'

# output data:
out='
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
/eYhpcp4EP8HPByZHvApAAA=
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

configfile="`mktemp`"
echo "$blconfig" | base64 -d | gunzip > "$configfile"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "blacklist" "$in" "$out" --blacklist-config "$configfile"
result=$?

rm "$configfile"

exit $result

