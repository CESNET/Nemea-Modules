#!/bin/bash

# input data:
in='
H4sIAG5cWVwAA62WS27bQAyGrXbfVQ8QuNtgQHLePUY3LRAEquM4rlDXNiQFQVDoJj1sOcrLMji1
VFgLG6I0nNE3//Dn+1l/fVys1/VqvWhXt+XNZrH8uamadjb78Kf48nve1MuyWW3b8uaxXTXzzxfW
XV7M9/Wu3S13G75Hvm129/VyVe53dZteubrmWNuUm0XTpjesiRoN/6jgTHq0bp9y7nmyVT8EUpaX
qe42u4fmOXW7qNdPr1zNMZJCFxRqq4KfX7/OzE/fHoJVhHp+OM9LQnha111VZxb2uO9zVfs0/JVF
Wd1yNHCISZUP1bb8VW3vn3EoOJzphdLge94+E7t3nwSm6DUYP+TqBK6Wr8sLw5dI2BnPXEgmzN9p
RcguQ5kAlOk5HkZ0PIygcwoHgRh5B+h4lBsGPP8PhwXOHAYR9EeZnVGehnMB5xq+hClsM9LoJwYn
SoNkbSAPsb3k/6kNpEnqQNIAQZaId64rNoJIyPZrPCGR4AhFcbB0FHkri0NLyqCMMDSmPR1g916R
odyJ5PNlRegoMrdISoM963nEfg8F3ORl2uiJRtAG+SBi5BrkcwdRgu1ztS4g4x2I3FuVZc3HL8qs
rchaG83J6BTrvjqOh41Wy7QRu+KrRDtQPE1bZg3EdUHLrAkn+UpQFnIi9qCCmaDitC6IJ8lOUjEZ
o0kmG7uiEsAeVYxek8dYtUZZxhZZHJBxbNFMIEfWOxUGXsKB5BM52FHJZVpnVJzsw59i3bMbD5sy
Jg5d8e1/UYOJsndb9u6YK8+iinOsSRsGmLXA5JlTivHbus4mY933OuPJ4hjjIxfAyo2nCcr5MAGt
zsk4ojIugzZYLiBhAlrDaM2Z+06bKQ+6K35IZK0bUXczLmecVg5wQnnIdhRO+UFfSWhTp5mpDqQc
TeCsHbAvnuQ8rToEiDJp7t6+C6S1DtGO6d9yrBlKv1eShr3Yv2VtLqk4Czf13RDlHlmWMXnlwnll
zG23MTJfMrabFfAXxL+PlLwOAAA=
'

# output data:
out='
H4sIAHHRflwAA92ZW2/bNhTH3/cpDD9tQEjzfvHLkCYtkId1xhKgwIpioCgqEWZLhiQ3y4J+91G0
E1uWEqmJ0WAOUKOiKF4Oz++cP8n78Zmp3HVe3I2no8/j0yxfmPkdvCpMkqR2/OVkNP6Yx65+eT8+
vb4uPqWZfxgjNEV8itDYV7j8FL796BbO1M/R3Ni/52lZJem8ckVo5OpuGRoZf5jnt3Wldw+V1n2Y
Rf16bP+F1pWZq2BWtwbT5X5j3+rq77+6rLpK198QhDVABCB2RfAUqSmmf9Y9nLvSFumySvMw4stV
uUxtmq/Kkc0Xi1WWWlO/G92m1c3osRsXjy5m9ecf8mJhqvrLi/P3p2GiZ86Urq/bs8J5izZrUYD4
FdZTRqaYhFof8yq8x5pALBTEiEOC6ejnzRj8uC5m21FNR5dLs7gxfvDnRb78ZWcKvnKYwWNLlEMl
YViYfFXYzdpdZLXlz/JVVs8J+bezIq/ysCapXSzDMvy+qma+R1eVDxXxunT3203Ru7vKPRRx4csu
st0iFEr2WguFMxY63Zv5+Mu3k9F9+22YTRjc/niDJ7RGsT/S9Qh2S85d5Wyv9/zhktDXTVUtp5PJ
7e0tLDdLAPPiehL7ZQg/sPpn7cMX56E9RzFWsQaRtg6wyChgEiuAtSqRWlqSMDX+9tN9k7utc8Lf
0mzDzP8MPDxl8seDh9FDty8DjyDpXVA8Dd5Zcbes8jS3o7Ay5XPsEYQgoyeNZ6pPRiaLR3q0yAvX
wyVpglnZp7iUQnSQKdpoYkkRky08MaEIqS5GMWO8A9ONnZo+Ncvz+aUrvm58bZYXdQufuf87GTH/
t4b6sf7Wt9vN15arjdO03W4JFgLiRoHWfkxk/yvRLPDjFs3PlG9ZNUqw3GtZMChJsy/k22pWwnUx
3wtOYc1asYlogWqjNOITFa0ARQjui1Fbj9+NUaUPUvbBVaG9mcT5bTbPTVxObPl1J0BxFVFJNQKJ
kwlgMXZA6wQDJ7WVVjJDqWsHqKMQBpS8gTDQU8xfIww0hfwAsoDimo1taMJSQsJITzzCA8MRke1o
RNrBiHCC2qFoox72mqRdWqE2RiPUKEFwt3JYT7jB63rKw3gVcl9N0BasFPXJicfFf7GcsFIaLiUg
TFvAcIyBiZx/tEjhREcSYX6ccoJP2RvoeB9csX4Frj4j6edwPf14OUBHYIW9t+ItrZLDXlb5QFZx
h6aXXcKBkDarmNNu0dBBa7DFIMGg0GChsDHNLtfBOMOoVnI/B2PSzsG8PwNvnGQ/A6elhaXJSuji
1cQs00l1U7tRvfiTRT2nXyvX4Bs7ganiEWBO+h+qI2BshEHsENFcIy1FcozZ2JsQvUE23nb7wmws
EVTsELt0BTk6UPLVg/boWBHd4pkwRkkX0AR3sRdm/9ROvZ7RwNxKBN7DsE1hb3LdruVLk6vAKGYm
ssA4ZPxeXVqgkP+x3CKkPYHcdUjhI0mu6E0OyeirDsmkhs/s1E+zOM9SkwxJsFJAtbNR949+I9nD
I2349ip+ikfU5hG1eWwLYUI6D826duPBEoNSK6X4O5JrMEsjtwbD7GEdpt7GOgz/ecXcl1m3HrKf
WQtzC6/9Eq6iVekKm2eV927oV3hiNsteJ9g0uwZLb4gSrFOu8Z5SNF78dTGD83I3CkhNYoOEAMwz
D5jAGER1HnYJIZEx/p8yx5iC/eYEvcGB3bbblx7Y1QcxB0jBhDLv8N+Vgw/PPN2czXUcu3cdkRHU
hBsxzbrT8Xp2g8Bdj+GVB+ePq/rinS62OmYUAyUSBRhnDGjhEIgiHRMqsIwoPUoM5ZS8BYa+W/UK
DBX3ik8dQglrDJk4kBSmbQxphxTuOIXinTK4i8P1zBscEqEQf0IWh+kN0sV+x73HIWtxyPo4fFzW
l3JohOXOSgmsUAlgEnEQOUWAZNoibpDDhhynKBZ+VG8CInuVKCZQkIOIYiqg1DuXV5hDqg8EZsdt
Vcf5MOaivUdVSA+WxbUtDn3iFMzSuFIKhhm21aVS9Yri3hufrYv8OFUcxzQxEidAOuelMbH1LjlB
ADOGBTYxj7g80nT8JqrYL/Fr0nG4wUT6UPm4D3syEHsS7pL7D6coVZp3XA0hyVhnXpad10NrI3SC
3pmXh0FMmRaa9WLMsBrA8euSM9P1gTAxwPqo6PeqEQc60hJg4v9LLOcRiz2V/wFGz8HD1iUAAA==
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "cz.cesnet.nemea.ipblacklistfilter" "$in" "$out" --blacklist-config <(echo -n "$blconfig" | base64 -d | gunzip)

