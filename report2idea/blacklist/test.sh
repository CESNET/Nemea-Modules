#!/bin/bash

# input data:
in='
H4sIAAO1Pl0AA62X3U7bQBCFMX2BXvQBkHuLVjuz/32M3rQSQm5ITOrWxKntFFGUd++sAyQOsyIB
fJHIY+/s7pezZyYfTobr02Q+b8v5pC9nxVU9mf6uq64/Ofl4mn29z7t2WnTloi+u7vqyy7+cGXt+
li/bpm+mTU33QLdds2qnZbFs2j6+cnFJsb4r6knXxzeMDgo0fQhvdXw07zc5lzRZOQyRMcvjVNd1
c9s9pO4n7XzzykUOAQVYL0AZ4V1++TQzPd0+lEYgqHx3nseEcrOu66rlF/a0+6Ka0XNPIWJT3FaL
4qZarB4AiCHN3XKYtlrmu0vf7gh2F/AIT65PPzNMwSmp3ZirZbgaus7PNF0sYasdcUGeMO3TsJBt
gjJKKfTAcTeiwm4ErBUwCoRAvwDuj7LjgKPv8TBPmf0oAm4vs9XC4XguSbnGL0EMm4Q0homlZaWB
vDaAhphB8nvaAHyTOpy1nD4AlZR+ndWMSNAMa3xBIt4isOIg6Qh0hheH4pSBCWEoiL/pCLtzAjWm
TiSdL8NCB5a5ARRKmnc+j+hY4MbytMEhHkBb8gcRAnmQ41mD5mC7lNd5ILwjkTsjkqzp+AWetWFZ
K60oGT5nPfjh682PdT8Ao9bZN462x/AybZ61RPIFxbNGOKqueGFkSsROCq+PUHFclwwM2TepOHBc
UWuF66xiwO45xqDJfaxKAS9jAyQOmajYbDGRKbLOCj+qJRSIdSIFOwjeplVCxbF8uOesFb4FtmRh
o1xn31+LWurA125DtTuk7JlVcYo1Kk0AkyUw1sxjzPhpXe8pY5as0o4nC4cUPrReGr7x1F5Y549A
q1IyDiC0TaD1hgzEH4FWE1r97n2n4tAasoefHFljD/DdRJXTVgkrgefK2kOyo7DCjfpKBBM7zYQ7
oLB4BGdlJdVFhvPb3IFt4LwM6+wHQ1opH8wh/VuKNUGxIaFhx/ZvyTIXVZyEG/tuGfgemZcxOmH9
e8sYteH4Uj+u9Tqb3Y8XYjXh9Zo6gXCAnqlcbjdf0BLi/k0Eo+MfE/K7nAc9+FDVFc2iviuu/8wW
FOvbVblNtmrjpPlN007+VpPFL4ouJrVYLZtaTP8lqbblddmWbRya79CJ2Z5zhT2BPGxeUwtueeQs
ybCxxF2BbLThbex0LtcnmfwPiEoCeCIQAAA=
'

# output data:
out='
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
'

blconfig="
H4sIAHWvWVwAA+VbW1PbOBR+3v4KbV52d6a2oVB6GQgTSNlmhtsQWGb6klEkJVaxJVeSE9Jfv0dy
7iQhNtk0YfMAJpLPOTrfuUlHHB4/xhHqMKW5FEelXX+nhJggknLRPird3Z55H0vH5TeHRIoWb6cK
G5hXfoPgc6iNSolBAsfsqNRmgikclbIxN/6756Gq7IpIYoq4MEx1cIRkC+EoQs0Ik4eIa6NhCMVc
pIZp5Hlj77OIxUwMGNA+pcaAUqm8u3MY9CdNsa1L8sAMMjxmMjWoJRVS7EfKgJ3fhoGYmVBaoZBm
sDS6kLN2xBp9YqXy+ymuh0GmifKbGXqhzDBipGq0eMR0aS6T2vV+qRyYOAmGmoE3YKUBT/b9pv17
1mKniRzMJXKwLJG7m/M5RFIVLUukelmfQ4QKPZPItBYtjBWlcA91uQkBKgAxduaHcNOCmqRAhowM
aQjhJADD8Qa21MYRcF8g00uc6sZGhgLUqtZeTchGbN6OHhlFrUh2NcKKwRNut+EbJy2RSjGdgGWB
H/WpDF+bYOM+J1/uKzdfPqNTmUYUNRkSadxkCrWUjEeec7jzFh3sla3VSsFQW8k0Caz0E8Y7poHy
E05TKHEKTjQDzHEdnGLD2lL1ZiiCG1T/enV3XkUADAmRljEbTKtVv1QQyd7l4Nl/csqwT5gWzPjk
51/TIs+Qrv82QFYTsB4bofwTaYDAMyKji8y9QRTFDLDvWBSeGsoC3lmAKJW7rPkcs0s8WvWYcmJJ
04ihVMPiTci1I4yMRCSUUjPUDTmobCQUjMDcZWSzP0vlbyyto1sFrzP1nIgVSsEcdWZPGeMJacFo
bUhmaBBkwY6XEETLVBEQJTQm0Z+D4CdLwfCcRD5uwmp8EoL/y4yJn4TJ8YDBEU+GA89I/zSFjBLG
EkIumzfGWVbAnycVBFOdGdeuO/sIsgn8PliCOU8a/dxaKu/PYToV+IZf5/Dhd4vWswqnKuQci42l
xSSVK7aWWX5yZvks4ygvNJtfAvxeEeAvcNSFjOXfYAER2z6uGXo1ZPwE/4HadXBz36hdn5z75jE3
5KOFvVbc55FeiHtFyBhHPR900mpxskbQAfNut+vrBMchTrUvVTugSibuRxGE631KqAoEtgJcm4bv
bYIVf0C6xcIlfMUSqQy6vbpBQlJIL9hktYLdazyt6iyNPFYyvVFZykrqqU444RJgupU5HGclkYGE
jDz4sF1KlPwO+yZnKeyRGw9nJQzTeU3FKtdSyDS8mbbioC4cDA5eCPMFF3ki5IpSQNdvw04ptYFf
wRbcwFyfyDjAAnyE41YAJR6U7V4iZaQ9m/mDGGu7gxwfgBzhR/mLgkqfCXJr31CrKG4RH7bQIrgm
vobE7TOaBjjhgQkVwyYD3spzbFiBRFG5rL9SkD9uIchE9RIjuSSTtR7RnbzAng4ovVJ0P21XhacX
lnidg+0s8uZl1jF8X1ah5RFsk2A2DMce6cUqdUDXQc+cMB2cyLYUOmilUdR0jx4vCL49YEFnQAdl
NDcTf1e4/TaEfr3e3t/Hr3cfR7jQmkjFXLHmsjPhXhPTdtrTRYA+raGKinvIQyeY/g1ENjSSO5Rf
VKcXc/ZfgvK73Q/+3q6/++md/34noNjgIAKJtPFgY/bAC+H8zb+snaKvUrBeIg06lV3FcyxrO9L2
7sJ2ypZgTEFLmOFVoFzNSL06mAuduK8fZpuvoVQgOzSL180oqF03TgZtjSIIX2TkXh2iLzlKX/9R
aqqiDlcOU/ZoDxGh0Cp+RnZ3c/4P39RD8tE3rl8/hvFEAx/WELhbB0uawBrb+/aTr8W/TGtxid79
BjXC9X/XCe87IarCrogv3imsqRluoy5XSqpdP86Eo5lszmHdTaDge6oNXUriTbiBsUSgm33da87l
rjkMizTr70Ns0OCalUY6dB5mLcgZ21Bby7AfUHEh8S2Ek43o2a8iadj6zk9AIaHB4sHZoSv5pIi4
YB6omlM/1zkcTG4QGeVaSeaw11aMWxCjSMo9UzilviMBwWxtOWudppGjFFlJhSgTJpxpZOGJMVqk
MLwCKg6W/xOqNuhdK9nEzQgKESkhDoseauFIMy+RmhvemRH5cp8T5uj3r+4o90fK6TB6Zge6wxN7
2vYgs/U7CZhEuc92LfHhPmQtpffaTeVlp0U5mvcrgVzv+TjGP2G73tXDsz3tU66JFML24mMWaB4n
EWv0i5oiUaI6pHeRA7ttgn0tjfz/uAn//bvGAgoFgYOmlKA33WBE6h5siuIGFjjqaa4H/fhsxihS
FOjmnWRMXtjRzKi8StPI0dFfiWnkucoLBpPAXoprRvPi/g3Y5L+jt4o7rFuEfY5G/1qvZ1avLtZ/
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

configfile="`mktemp`"
echo "$blconfig" | base64 -d | gunzip > "$configfile"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "blacklist" "$in" "$out" --blacklist-config "$configfile"
result=$?

rm "$configfile"

exit $result

