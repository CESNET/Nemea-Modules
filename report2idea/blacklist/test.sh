#!/bin/bash

# input data:
in='
H4sIAG5cWVwAA62WS27bQAyGrXbfVQ8QuNtgQHLePUY3LRAEquM4rlDXNiQFQVDoJj1sOcrLMji1
VFgLG6I0nNE3//Dn+1l/fVys1/VqvWhXt+XNZrH8uamadjb78Kf48nve1MuyWW3b8uaxXTXzzxfW
XV7M9/Wu3S13G75Hvm129/VyVe53dZteubrmWNuUm0XTpjesiRoN/6jgTHq0bp9y7nmyVT8EUpaX
qe42u4fmOXW7qNdPr1zNMZJCFxRqq4KfX7/OzE/fHoJVhHp+OM9LQnha111VZxb2uO9zVfs0/JVF
Wd1yNHCISZUP1bb8VW3vn3EoOJzphdLge94+E7t3nwSm6DUYP+TqBK6Wr8sLw5dI2BnPXEgmzN9p
RcguQ5kAlOk5HkZ0PIygcwoHgRh5B+h4lBsGPP8PhwXOHAYR9EeZnVGehnMB5xq+hClsM9LoJwYn
SoNkbSAPsb3k/6kNpEnqQNIAQZaId64rNoJIyPZrPCGR4AhFcbB0FHkri0NLyqCMMDSmPR1g916R
odyJ5PNlRegoMrdISoM963nEfg8F3ORl2uiJRtAG+SBi5BrkcwdRgu1ztS4g4x2I3FuVZc3HL8qs
rchaG83J6BTrvjqOh41Wy7QRu+KrRDtQPE1bZg3EdUHLrAkn+UpQFnIi9qCCmaDitC6IJ8lOUjEZ
o0kmG7uiEsAeVYxek8dYtUZZxhZZHJBxbNFMIEfWOxUGXsKB5BM52FHJZVpnVJzsw59i3bMbD5sy
Jg5d8e1/UYOJsndb9u6YK8+iinOsSRsGmLXA5JlTivHbus4mY933OuPJ4hjjIxfAyo2nCcr5MAGt
zsk4ojIugzZYLiBhAlrDaM2Z+06bKQ+6K35IZK0bUXczLmecVg5wQnnIdhRO+UFfSWhTp5mpDqQc
TeCsHbAvnuQ8rToEiDJp7t6+C6S1DtGO6d9yrBlKv1eShr3Yv2VtLqk4Czf13RDlHlmWMXnlwnll
zG23MTJfMrabFfAXxL+PlLwOAAA=
'

# output data:
out='
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
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "cz.cesnet.nemea.ipblacklistfilter" "$in" "$out" --blacklist-config <(echo -n "$blconfig" | base64 -d | gunzip)

