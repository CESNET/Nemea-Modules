#!/bin/bash

# input data:
in='
H4sIAAO1Pl0AA62X3U7bQBCFMX2BXvQBkHuLVjuz/32M3rQSQm5ITOrWxKntFFGUd++sAyQOsyIB
fJHIY+/s7pezZyYfTobr02Q+b8v5pC9nxVU9mf6uq64/Ofl4mn29z7t2WnTloi+u7vqyy7+cGXt+
li/bpm+mTU33QLdds2qnZbFs2j6+cnFJsb4r6knXxzeMDgo0fQhvdXw07zc5lzRZOQyRMcvjVNd1
c9s9pO4n7XzzykUOAQVYL0AZ4V1++TQzPd0+lEYgqHx3nseEcrOu66rlF/a0+6Ka0XNPIWJT3FaL
4qZarB4AiCHN3XKYtlrmu0vf7gh2F/AIT65PPzNMwSmp3ZirZbgaus7PNF0sYasdcUGeMO3TsJBt
gjJKKfTAcTeiwm4ErBUwCoRAvwDuj7LjgKPv8TBPmf0oAm4vs9XC4XguSbnGL0EMm4Q0homlZaWB
vDaAhphB8nvaAHyTOpy1nD4AlZR+ndWMSNAMa3xBIt4isOIg6Qh0hheH4pSBCWEoiL/pCLtzAjWm
TiSdL8NCB5a5ARRKmnc+j+hY4MbytMEhHkBb8gcRAnmQ41mD5mC7lNd5ILwjkTsjkqzp+AWetWFZ
K60oGT5nPfjh682PdT8Ao9bZN462x/AybZ61RPIFxbNGOKqueGFkSsROCq+PUHFclwwM2TepOHBc
UWuF66xiwO45xqDJfaxKAS9jAyQOmajYbDGRKbLOCj+qJRSIdSIFOwjeplVCxbF8uOesFb4FtmRh
o1xn31+LWurA125DtTuk7JlVcYo1Kk0AkyUw1sxjzPhpXe8pY5as0o4nC4cUPrReGr7x1F5Y549A
q1IyDiC0TaD1hgzEH4FWE1r97n2n4tAasoefHFljD/DdRJXTVgkrgefK2kOyo7DCjfpKBBM7zYQ7
oLB4BGdlJdVFhvPb3IFt4LwM6+wHQ1opH8wh/VuKNUGxIaFhx/ZvyTIXVZyEG/tuGfgemZcxOmH9
e8sYteH4Uj+u9Tqb3Y8XYjXh9Zo6gXCAnqlcbjdf0BLi/k0Eo+MfE/K7nAc9+FDVFc2iviuu/8wW
FOvbVblNtmrjpPlN007+VpPFL4ouJrVYLZtaTP8lqbblddmWbRya79CJ2Z5zhT2BPGxeUwtueeQs
ybCxxF2BbLThbex0LtcnmfwPiEoCeCIQAAA=
'

# output data:
out='
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
cH+oSKkyHsj/Ad0bU6hIKgAA
'

blconfig="
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
P3M111h/IfqTx1ijCYfB1P9Y/QuhfCd2mzUAAA==
"

test -z "$srcdir" && export srcdir=.

. $srcdir/../test.sh

test_conversion "blacklist" "cz.cesnet.nemea.ipblacklistfilter" "$in" "$out" --blacklist-config <(echo -n "$blconfig" | base64 -d | gunzip)

